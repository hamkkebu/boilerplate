# ========================================
# 환경 변수 예제 파일
# ========================================
#
# 사용 방법:
# 1. 이 파일을 .env로 복사: cp .env.example .env
# 2. .env 파일의 값을 실제 환경에 맞게 수정
# 3. .env 파일은 절대 Git에 커밋하지 마세요!
#
# ========================================

# ========================================
# Spring Profile
# ========================================
# dev: 개발 환경
# prod: 프로덕션 환경
SPRING_PROFILES_ACTIVE=dev

# ========================================
# MySQL Database
# ========================================
# SECURITY: 프로덕션에서는 강력한 랜덤 비밀번호 사용 (32자 이상 권장)
MYSQL_ROOT_PASSWORD=root
MYSQL_DATABASE=hamkkebu_boilerplate_db

# Spring Datasource 설정 (application.yml에서 사용)
DB_URL=jdbc:mysql://localhost:3306/
DB_USERNAME=root
DB_PASSWORD=root

# HikariCP Connection Pool 설정
DB_POOL_MAX_SIZE=20                 # 최대 커넥션 수
DB_POOL_MIN_IDLE=5                  # 최소 유휴 커넥션 수
DB_POOL_CONNECTION_TIMEOUT=30000    # 커넥션 타임아웃 (밀리초)
DB_POOL_IDLE_TIMEOUT=600000         # 유휴 커넥션 타임아웃 (밀리초)
DB_POOL_MAX_LIFETIME=1800000        # 커넥션 최대 수명 (밀리초)
DB_POOL_LEAK_DETECTION=60000        # 커넥션 누수 감지 임계값 (밀리초)

# Transaction 타임아웃 (초)
TRANSACTION_TIMEOUT=30

# ========================================
# Redis
# ========================================
# SECURITY: 프로덕션에서는 강력한 랜덤 비밀번호 사용 (32자 이상 권장)
# 예: openssl rand -base64 32
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=devRedisPassword123!
REDIS_TIMEOUT=2000ms

# ========================================
# JWT Secret
# ========================================
# SECURITY: HS512 알고리즘은 최소 512-bit (64 bytes) 이상 필수
# 생성 방법: openssl rand -base64 64
# WARNING: 프로덕션에서는 반드시 변경하세요!
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_SECRET_KEY_GENERATED_WITH_OPENSSL_RAND_BASE64_64_MINIMUM_512_BITS

# JWT 토큰 유효시간 (밀리초)
JWT_ACCESS_TOKEN_VALIDITY=3600000    # 1시간
JWT_REFRESH_TOKEN_VALIDITY=604800000  # 7일

# ========================================
# Kafka
# ========================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# ========================================
# Security - Login Attempt
# ========================================
# 로그인 시도 제한 설정
LOGIN_MAX_ATTEMPTS=5              # 최대 로그인 시도 횟수
LOGIN_BLOCK_DURATION=15           # 계정 잠금 시간 (분)
LOGIN_ATTEMPT_RESET=15            # 로그인 시도 카운터 초기화 시간 (분)

# ========================================
# CORS 설정
# ========================================
# 프로덕션: 실제 도메인으로 변경
# 개발: http://localhost:*, http://127.0.0.1:*
CORS_ALLOWED_ORIGINS=http://localhost:*,http://127.0.0.1:*

# ========================================
# gRPC 설정 (마이크로서비스 간 통신)
# ========================================
GRPC_SERVER_PORT=9090
USER_SERVICE_GRPC_ADDRESS=static://localhost:9090
TRANSACTION_SERVICE_GRPC_ADDRESS=static://localhost:9090

# ========================================
# 프로덕션 환경 예제
# ========================================
# 프로덕션 배포 시 아래 값을 참고하여 .env 파일을 작성하세요.
#
# SPRING_PROFILES_ACTIVE=prod
# MYSQL_ROOT_PASSWORD=강력한_랜덤_비밀번호_32자_이상
# MYSQL_DATABASE=hamkkebu_boilerplate_prod_db
# REDIS_PASSWORD=강력한_랜덤_비밀번호_32자_이상
# JWT_SECRET=실제로_사용할_강력한_시크릿_키_64바이트_이상
# CORS_ALLOWED_ORIGINS=https://hamkkebu.com,https://www.hamkkebu.com,https://api.hamkkebu.com
#
# 강력한 비밀번호 생성 예제:
# openssl rand -base64 32  # MySQL, Redis 비밀번호용
# openssl rand -base64 64  # JWT Secret용 (HS512는 최소 64바이트 필요)
# pwgen -s 32 1
#
# WARNING: .env 파일은 절대 Git에 커밋하지 마세요!
# .gitignore에 .env가 추가되어 있는지 확인하세요.
